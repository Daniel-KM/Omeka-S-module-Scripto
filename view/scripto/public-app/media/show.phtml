<?php
$this->headLink()->appendStylesheet($this->assetUrl('vendor/featherlight/featherlight.min.css', 'Scripto'));
$this->headScript()->appendFile($this->assetUrl('js/media-review.js', 'Scripto'));
$this->headScript()->appendFile($this->assetUrl('js/wikitext-editor.js', 'Scripto'));
$this->headLink()->appendStylesheet('https://use.fontawesome.com/releases/v5.0.9/css/all.css');
$this->headScript()->appendFile($this->assetUrl('vendor/jquery-panzoom/jquery.panzoom.min.js', 'Scripto'));
$this->headScript()->appendFile($this->assetUrl('vendor/featherlight/featherlight.min.js', 'Scripto'));
?>
<article class="post">
    <header class="post-header">
        <h1 class="post-title"><?php echo $media->displayTitle(); ?></h1>
        <h2 class="media-item"><?php echo sprintf($this->translate('Part of %s'), $sItem->link($item->displayTitle())); ?></h2>
    </header>
    <div class="post-content">
        <div class="media-head">
            <?php echo $sMedia->link($sMedia->userCanEdit() ? $this->translate('Edit') : $this->translate('View'), 'edit', ['class' => 'button']); ?>
            <?php echo $this->scripto()->mediaPagination(); ?>
        </div>
        <div class="resource-content">
            <div class="media metadata">
                <h3><?php echo $this->translate('Metadata'); ?></h3>
                <?php $displayValues = $media->displayValues(); ?>
                <?php echo $displayValues  ? $displayValues : sprintf('<span>[%s]</span>', $this->translate('No metadata')); ?>
            </div>
            <div class="media html">
                <h3><?php echo $this->translate('HTML'); ?></h3>
                <?php $pageHtml = $sMedia->pageHtml(); ?>
                <?php echo $pageHtml  ? $pageHtml : sprintf('<span>[%s]</span>', $this->translate('No HTML')); ?>
            </div>
            <?php if ($sMedia->isRenderableImage()): ?>
            <div class="panzoom-container image">
                <div class="zoom-controls">
                    <button class="zoom-in" aria-label="<?php echo $this->escapeHtml($this->translate('Zoom in')); ?>" title="<?php echo $this->escapeHtml($this->translate('Zoom in')); ?>"></button>
                    <button class="zoom-out" aria-label="<?php echo $this->escapeHtml($this->translate('Zoom out')); ?>" title="<?php echo $this->escapeHtml($this->translate('Zoom out')); ?>"></button>
                    <button class="rotate-right" aria-label="<?php echo $this->escapeHtml($this->translate('Rotate right')); ?>" title="<?php echo $this->escapeHtml($this->translate('Rotate right')); ?>"></button>
                    <button class="rotate-left" aria-label="<?php echo $this->escapeHtml($this->translate('Rotate left')); ?>" title="<?php echo $this->escapeHtml($this->translate('Rotate left')); ?>"></button>
                    <button class="reset"><?php echo $this->translate('Reset'); ?></button>
                </div>
                <div class="media-render">
                    <img src="<?php echo $this->escapeHtml($media->originalUrl()); ?>">
                </div>
            </div>
            <?php else: ?>
            <div class="panzoom-container">
                <?php echo $media->render(['link' => null]); ?>
            </div>
            <?php endif; ?>
        </div>
    </div>
</article>
